<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Build Emacs On Windows</title>
<meta name="generator" content="Org Mode">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="stylesheet" type="text/css" href="/css/main.bundle.min.css">
<script type="text/javascript" src="/js/appearance.min.js"></script>
<script defer="" type="text/javascript" src="/js/main.bundle.min.js"></script>
</head>
<body>
<header id="preamble" class="status">
<div class="site-header">
  <a class="site-title" href="/">Chuck</a>
  <div class="site-nav">
    <div id="menu-list" class="main-menu">
      <a href="/posts/">Posts</a>
      <a href="/about.html">About</a>
    </div>
    <button aria-label="Search" onclick="window.location.href='/search.html';">
      <svg width="20" height="20" viewBox="0 0 24 24">
        <path fill="currentcolor" d="M23.822 20.88l-6.353-6.354c.93-1.465 1.467-3.2 1.467-5.059.001-5.219-4.247-9.467-9.468-9.467s-9.468 4.248-9.468 9.468c0 5.221 4.247 9.469 9.468 9.469 1.768 0 3.421-.487 4.839-1.333l6.396 6.396 3.119-3.12zm-20.294-11.412c0-3.273 2.665-5.938 5.939-5.938 3.275 0 5.94 2.664 5.94 5.938 0 3.275-2.665 5.939-5.94 5.939-3.274 0-5.939-2.664-5.939-5.939z"></path>
      </svg>
    </button>
    <button id="appearance-switcher" aria-label="Appearance Switcher">
      <svg id="moon" width="20" height="20" viewBox="0 0 512 512">
        <path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z">
        </path>
      </svg>
      <svg id="sun" width="20" height="20" viewBox="0 0 512 512">
        <path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z">
        </path>
      </svg>
    </button>
    <button id="menu-button" aria-label="Menu">
      <svg width="20" height="20" viewBox="0 0 448 512">
        <path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z">
        </path>
      </svg>
    </button>
  </div>
</div>
</header>
<main id="content" class="content">
<header>
<h1 class="title">Build Emacs On Windows</h1>
</header><p>
On Windows, we can build GNU Emacs with <a href="https://www.msys2.org/">MSYS2</a> and <a href="https://www.mingw-w64.org/">MinGW-w64</a>. 
</p>

<p>
First, install some necessary packages. The packages include the base developer tools, the compiler toolchain, several image libraries, and XML library, the GnuTLS library, zlib for decompressing text, HarfBuzz for use as the shaping engine, libgccjit for native-compilation support, SQLite3 for accessing SQL databases, and the tree-sitter library used by some major modes. You can select only part of the libraries if you don't need them all.
</p>

<div class="org-src-container">
<pre class="src src-bash">pacman --noconfirm -S --needed <span class="org-sh-escaped-newline">\</span>
    base-devel <span class="org-sh-escaped-newline">\</span>
    mingw-w64-x86_64-toolchain <span class="org-sh-escaped-newline">\</span>
    mingw-w64-x86_64-xpm-nox <span class="org-sh-escaped-newline">\</span>
    mingw-w64-x86_64-gmp <span class="org-sh-escaped-newline">\</span>
    mingw-w64-x86_64-gnutls <span class="org-sh-escaped-newline">\</span>
    mingw-w64-x86_64-libtiff <span class="org-sh-escaped-newline">\</span>
    mingw-w64-x86_64-giflib <span class="org-sh-escaped-newline">\</span>
    mingw-w64-x86_64-libpng <span class="org-sh-escaped-newline">\</span>
    mingw-w64-x86_64-libjpeg-turbo <span class="org-sh-escaped-newline">\</span>
    mingw-w64-x86_64-librsvg <span class="org-sh-escaped-newline">\</span>
    mingw-w64-x86_64-libwebp <span class="org-sh-escaped-newline">\</span>
    mingw-w64-x86_64-lcms2 <span class="org-sh-escaped-newline">\</span>
    mingw-w64-x86_64-libxml2 <span class="org-sh-escaped-newline">\</span>
    mingw-w64-x86_64-zlib <span class="org-sh-escaped-newline">\</span>
    mingw-w64-x86_64-harfbuzz <span class="org-sh-escaped-newline">\</span>
    mingw-w64-x86_64-libgccjit <span class="org-sh-escaped-newline">\</span>
    mingw-w64-x86_64-sqlite3 <span class="org-sh-escaped-newline">\</span>
    mingw-w64-x86_64-libtree-sitter
</pre>
</div>

<p>
Then, use git to clone the repository, we also need autotools to generate the configure script.
</p>

<div class="org-src-container">
<pre class="src src-bash">pacman --noconfirm -S git autotools
git config --global core.autocrlf false
</pre>
</div>

<p>
You now have a complete build environment for Emacs.
</p>

<div class="org-src-container">
<pre class="src src-bash">mkdir /c/emacs
<span class="org-builtin">cd</span> /c/emacs
git clone --depth=1 https://git.savannah.gnu.org/git/emacs.git emacs-master
<span class="org-variable-name">install_dir</span>=/c/programs/emacs
<span class="org-builtin">cd</span> /c/emacs/emacs-master
./autogen.sh
./configure --prefix=${<span class="org-variable-name">install_dir</span>} --with-native-compilation=aot --with-tree-sitter --without-dbus --without-pop
<span class="org-variable-name">NPROC</span>=$(<span class="org-sh-quoted-exec">nproc</span>)
make -j${<span class="org-variable-name">NPROC</span>}
make install
</pre>
</div>

<p>
After building and installing, we need to copy necessary DLLs into Emacs's bin directory if we run Emacs outside the mingw64 shell.
</p>

<details>
<summary>
<p>
Package necessary DLLs
</p>
</summary>

<div class="org-src-container">
<pre class="src src-bash">cp -v /mingw64/bin/libbrotlicommon.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libbrotlidec.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libbrotlienc.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libbz*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libcairo-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libdatrie-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libdeflate.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libexpat-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libffi-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libfontconfig-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libfreetype-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libfribidi-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libgcc_s_seh-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libgdk_pixbuf-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libgif-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libgio-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libglib-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libgmodule-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libgmp-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libgnutls-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libgobject-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libgraphite*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libharfbuzz-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libhogweed-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libiconv-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libidn*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libintl-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libisl-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libjbig-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libjpeg-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/liblcms*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libLerc.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/liblzma-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libmpc-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libmpfr-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libnettle-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libp11-kit-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libpango-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libpangocairo-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libpangoft*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libpangowin32-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libpcre*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libpixman-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libpng*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/librsvg*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libsharpyuv-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libsqlite*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libstdc++-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libtasn1-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libthai-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libtiff-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libtree-sitter-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libunistring-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libwebp-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libwebpdemux-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libwinpthread-*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libxml*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libXpm*.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/libzstd.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/wasmtime.dll ${<span class="org-variable-name">install_dir</span>}/bin
cp -v /mingw64/bin/zlib*.dll ${<span class="org-variable-name">install_dir</span>}/bin

cp -v /mingw64/bin/libgccjit*.dll ${<span class="org-variable-name">install_dir</span>}/bin
mkdir -p ${<span class="org-variable-name">install_dir</span>}/lib/gcc
cp -v /mingw64/lib/{crtbegin,crtend,dllcrt2}.o ${<span class="org-variable-name">install_dir</span>}/lib/gcc
cp -v /mingw64/lib/lib{advapi32,gcc_s,kernel32,mingw32,mingwex,moldname,msvcrt,pthread,shell32,user32}.a ${<span class="org-variable-name">install_dir</span>}/lib/gcc
cp -v /mingw64/lib/gcc/x86_64-w64-mingw32/14.2.0/libgcc.a ${<span class="org-variable-name">install_dir</span>}/lib/gcc
cp -v /mingw64/bin/{ld,as}.exe ${<span class="org-variable-name">install_dir</span>}/lib/gcc
cp -v /mingw64/bin/libzstd.dll ${<span class="org-variable-name">install_dir</span>}/lib/gcc
cp -v /mingw64/bin/zlib*.dll ${<span class="org-variable-name">install_dir</span>}/lib/gcc
</pre>
</div>
</details>
</main>
<footer id="postamble" class="status">
<div class="site-footer">
  <p>&copy 2026 Chuck</p>
  <p>Powered by <a href="https://www.gnu.org/software/emacs/">Emacs</a></p>
</div>
<a href="#top" class="top-link" id="top-link" style="visibility: hidden; opacity: 0;">
  <svg xmlns="http://www.w3.org/2000/svg" height="24px" width="24px" viewBox="0 -960 960 960" fill="currentcolor">
    <path d="M440-160v-487L216-423l-56-57 320-320 320 320-56 57-224-224v487h-80Z"></path>
  </svg>
</a>
</footer>
</body>
</html>
