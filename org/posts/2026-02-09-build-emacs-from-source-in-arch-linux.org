#+TITLE: Arch Linux 中从源码编译 Emacs
#+AUTHOR: Chuck
#+DESCRIPTION: 这里介绍在 Arch Linux 环境中从源码编译安装 Emacs 的经验。
#+KEYWORDS: Emacs, Linux, Arch
#+DATE: <2026-02-09 Mon 13:12>

这里介绍在 Arch Linux 环境中从源码编译安装 Emacs 的经验。

首先，安装编译前的依赖包。

#+begin_src bash
sudo pacman -Syu --needed base-devel libgccjit gnutls gtk3 giflib libjpeg-turbo libpng libtiff libwebp libxpm libsm harfbuzz libotf xcb-util libxcb libxi libxml2 sqlite3 tree-sitter
#+end_src

然后，下载 Emacs 源码进行编译。

#+begin_src bash
git clone --depth 1 https://github.com/emacsmirror/emacs.git
cd emacs
./autogen.sh
./configure --prefix=/usr/local/emacs --with-native-compilation=aot --with-pgtk --with-tree-sitter --without-compress-install
make -j 4
sudo make install
#+end_src

PS: 如果配置了 [[https://www.archlinuxcn.org/archlinux-cn-repo-and-mirror/][archlinuxcn]] 软件仓库，可以直接安装现成的，每天都会更新。

#+begin_src bash
sudo pacman -S emacs-native-comp-pgtk-git
#+end_src

稳定版本直接安装 emacs 或者 emacs-wayland 包就可以了。
