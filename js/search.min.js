var fuse,searchInput=document.getElementById("search-input"),searchResults=document.getElementById("search-results"),first=searchResults.firstChild,last=searchResults.lastChild,hasResults=!1;function clearSearch(){hasResults=!1,searchResults.innerHTML="",searchInput.value="",searchInput.focus()}window.addEventListener("load",e=>{let t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){let e=JSON.parse(t.responseText);if(e){fuse=new Fuse(e,{shouldSort:!0,location:0,threshold:.6,distance:100,ignoreLocation:!1,keys:["title","description","keywords"]})}}else console.log(t.responseText)},t.open("GET","../index.json"),t.send()}),searchInput.onkeyup=function(e){if(fuse){let e=fuse.search(this.value);if(0!==e.length){let t="";for(let s in e)t+=`<li><a href="${e[s].item.url}" aria-label="${e[s].item.title}">\n          <h1>${e[s].item.title}</h1><p>${e[s].item.description}</p></a></li>`;searchResults.innerHTML=t,hasResults=!0,first=searchResults.firstChild.firstElementChild,last=searchResults.lastChild.firstElementChild}else searchResults.innerHTML="",hasResults=!1}},searchInput.addEventListener("search",e=>{this.value||clearSearch()}),document.addEventListener("keydown",function(e){"Escape"==e.key?clearSearch():"ArrowDown"==e.key?hasResults&&(e.preventDefault(),document.activeElement==searchInput?first.focus():document.activeElement==last?last.focus():document.activeElement.parentElement.nextSibling.firstElementChild.focus()):"ArrowUp"==e.key?hasResults&&(e.preventDefault(),document.activeElement==searchInput||document.activeElement==first?searchInput.focus():document.activeElement.parentElement.previousSibling.firstElementChild.focus()):"Enter"==e.key&&hasResults&&(e.preventDefault(),document.activeElement==searchInput?first.focus():document.activeElement.click())});